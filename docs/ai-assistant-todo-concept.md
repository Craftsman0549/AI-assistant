# AIアシスタント付きToDoアプリ コンセプトドキュメント（ドラフト）

このドキュメントは、AIアシスタント機能を備えたToDo管理アプリのアイデア段階の仕様をまとめたものです。実装を進める過程でよりよい仕様・内部設計へ更新されることを前提としています。開発エージェントは本資料を参照しつつも、得られた知見に応じて本ドキュメントを継続的に改善してください。

## ゴールと基本方針
- 日々のタスク管理・実行・振り返りを一貫してサポートし、生産性と習慣化を高める。
- AIアシスタントがユーザーの状態や履歴を理解し、自然な会話で支援・提案を行う。
- マルチデバイス対応とチーム連携を視野に入れ、スケーラブルなアーキテクチャを志向する。
- ドキュメントに記載の要件は変更可能であり、ユーザーテストや技術検証の結果に応じて柔軟に見直す。

## 想定ユーザーペルソナ
- **個人利用者**: 毎日のTODO管理とスケジュール調整をシンプルに済ませたい。
- **プロジェクトワーカー**: 複数端末で作業し、作業ログや振り返りから改善したい。
- **チームメンバー**: 他者の進捗や公開振り返りからインスピレーションやモチベーションを得たい。

## システム全体像（暫定）
- **フロントエンド**: Next.js（`aituber-kit`）をベースにアプリUIとAIとのチャットUIを実装。Task Board、スケジュールビュー、振り返りダッシュボード。
- **AI対話レイヤー**: AITuberKitによるアバター/音声・テキスト対話。Mastraベースのエージェント（`AI_assistant/my-mastra-app`）と連携し、タスク管理APIを呼び出す。
- **バックエンド**: 認証、タスク管理、スケジューラ、振り返り集計のREST/GraphQL API（詳細は別途設計）。ワークスペース単位でマルチテナント運用を想定。
- **データストア**: ユーザー情報、タスク、作業ログ、スケジュール、共有ビュー設定などを管理。AI向けに要約やembedding用ストアの検討。
- **外部連携**: カレンダー（Google/Outlook等）、CSVエクスポート、将来的なPush通知やモバイルアプリ連携。

## 主要ユースケース
- 会話でタスク作成やスケジュール調整の協議を行う。
- デバイスを跨いでタスクリストを参照し、着手・完了操作を行う。
- 作業時間の記録をもとに日/週/月単位で振り返り、AI要約や他者の公開ログを確認する。
- 大枠の予定をAIに提案してもらい、自分で細かく調整する。

## 機能要件（ドラフト）

### 認証・アカウント管理
- アカウント単位でタスクリスト・作業ログを分離管理。
- 同一ユーザーが複数端末からアクセス可能。セッション管理・端末登録は要検討。
- OAuth等の外部認証やチームアカウントの導入可否は後続検討事項。

### タスク作成・編集
- 入力項目: `名前`, `備考`, `期限`, `優先度`、定期タスク設定（繰り返し周期・終了条件）。
- 自動フィールド: `作成日時`, `更新日時`, `累計作業時間`, `完了日時`。
- AIアシスタントがタスク入力を音声/テキストで補助し、曖昧情報を確認する対話フローを持つ。
- 定期タスクは複製ロジックやワークフローを要設計（例: インスタンス生成 vs シングルタスク更新）。

### タスク一覧・管理
- 一覧表示でフィルタリング（状態・期限・優先度など）とフリーテキスト検索。
- リスト更新（状態変更、編集、削除、並び順）をリアルタイム反映。
- 状態: `未着手`, `作業中`, `中断`, `完了`（要件より）を想定。中断理由の扱いは要確認。
- モバイル表示最適化とアクセシビリティ要件は今後詳細化。

### タスク実行・時間計測
- 作業開始ボタンで `作業中` に遷移、作業セッションを記録。途中停止で `中断` 状態、完了時に `完了`。
- `作業開始時刻`, `終了時刻`, セッションごとの作業時間を記録し、タスクに累計反映。
- AIアシスタントが進捗確認やリマインダーを会話で提供。自動トラッキング（インテリジェントな終了判定等）は将来検討。

### 振り返り・分析
- 日/週/月単位のビュー（カレンダー形式含む）で作業ログを可視化。グラフ/統計表示: 対象期間、合計作業時間、完了件数、日別推移、作業内容別集計。
- AI要約: 期間内の成果と改善点を自然言語で要約。要約生成時のプロンプト、フィルタ条件、評価指標は別途定義。
- CSVエクスポート: 選択期間のタスク・作業ログをダウンロード。カラム定義や文字コードなどは後続決定。
- 他者の公開振り返り閲覧時のプライバシー／共有スコープ設計が必要。

### スケジューリング
- 作業可能時間帯・上限時間をユーザーが設定。
- AI主導: タスク重要度・期限・所要時間をもとにスケジュール提案。
- 手動編集: カレンダービューでドラッグ＆ドロップ等による調整を想定。
- 外部カレンダー連携で予定を自動登録。認可方式、双方向同期可否は未定。
- モバイル通知や「今やるべきこと」ビューの要件は追加調査が必要。

### 他ユーザー連携
- 他ユーザーの公開ステータス（今やっているタスク、直近の振り返り）を閲覧可能。
- タスク作成・スケジューリング時に他者の予定を参照できる仕組み。
- モチベーション向上のためのリアクション、コメント機能の有無は要検討。
- 公開範囲（全体/チーム/個別）と表示するデータ粒度はプライバシーポリシーに基づき調整。

## AIアシスタント体験ガイドライン
- **対話エントリポイント**: タスク追加、予定調整、進捗確認、振り返り要約要求など。UIからのショートカットと音声トリガーを用意。
- **コンテキスト管理**: ユーザーの最新タスク、スケジュール、過去会話ログを参照し回答に活用。会話履歴の保持期間とプライバシーは要設計。
- **アクション呼び出し**: タスク作成・編集・時間計測・レポート生成をAPI経由で実行。Mastraのツール定義とAITuberKit側のイベント連携を整理する。
- **安全性と説明責任**: 提案や要約には根拠（引用タスク等）を併記し、誤提案時の修正フローを提供。

## データモデル草案（要更新）
- `User`: id, displayName, email, authProvider, preferences（通知/共有設定など）
- `Task`: id, ownerId, title, note, dueDate, priority, createdAt, updatedAt, completedAt, totalWorkDuration, recurrenceRule, status
- `TaskSession`: id, taskId, startedAt, endedAt, duration, interruptionReason
- `ScheduleSlot`: id, userId, taskId?, start, end, source (`AI`, `manual`, `external`)
- `ReviewSummary`: id, userId, periodType (`daily`/`weekly`/`monthly`), periodStart, periodEnd, summaryText, aiSummaryMeta
- `SharedView`: id, ownerId, visibilityScope, audienceId?, contentType (`timeline`, `summary`), createdAt
- `IntegrationAccount`: id, userId, provider, refreshTokenMeta, syncConfig

> 上記は初期案であり、実装時に正規化/非正規化の度合いやインデックス設計、マルチテナント対応などを再検討する。

## 非機能要件のたたき台
- デバイス間同期を秒〜分単位で担保するリアルタイム更新（WebSocketやSSE）の検討。
- タスク・会話データのセキュリティと個人情報保護（暗号化、アクセス制御、ログ監査）。
- 可観測性: 作業時間やAI提案の品質を計測するためのメトリクス設計。
- パフォーマンス: タスク件数が多いユーザーでも快適な検索・フィルタ操作。
- レジリエンス: 重要操作（作業時間計測など）の途中障害時のフォールバック設計。

## オープン課題・次のアクション例
- バックエンド/APIの技術選定（既存サービスを活用するか新規実装か）。
- AITuberKitとMastraエージェントのインターフェース定義、イベント設計。
- スケジュール提案アルゴリズムと学習データの扱い。
- プライバシーとチーム共有機能の境界設定。
- モバイルアプリ／通知チャネルの要否と実装方式。
- ドキュメント更新フローの整備（仕様変更時のPull Requestテンプレなど）。

---

このドキュメントはドラフトであり、開発プロセスの各段階で見直し・更新される想定です。実装や検証から新たな洞察が得られた際は、根拠を明記したうえで改訂を行ってください。
